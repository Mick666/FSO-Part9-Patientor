(this.webpackJsonppatientor=this.webpackJsonppatientor||[]).push([[0],{261:function(e,a,t){e.exports=t(438)},438:function(e,a,t){"use strict";t.r(a);var n,l,r=t(0),c=t.n(r),i=t(62),o=t.n(i),s=(t(266),t(30)),d=t.n(s),u=t(19),m=t(46),p=t.n(m),E=t(74),h=t(18),b=t(446),v=t(456),f=t(453),g=t(447),y="http://localhost:3001/api",C=t(55),O=t(32),D={patients:{},patientInfo:{},diagnoses:{}},k=Object(r.createContext)([D,function(){return D}]),S=function(){return Object(r.useContext)(k)},w=t(452),F=t(449),j=t(455),N=t(454),x=t(15),A=t(448),T=t(451),L=function(e){var a=e.name,t=e.label,n=e.options;return c.a.createElement(A.a.Field,null,c.a.createElement("label",null,t),c.a.createElement(x.b,{as:"select",name:a,className:"ui dropdown"},n.map((function(e){return c.a.createElement("option",{key:e.value,value:e.value},e.label||e.value)}))))},H=function(e){var a=e.field,t=e.label,n=e.placeholder;return c.a.createElement(A.a.Field,null,c.a.createElement("label",null,t),c.a.createElement(x.b,Object.assign({placeholder:n},a)),c.a.createElement("div",{style:{color:"red"}},c.a.createElement(x.a,{name:a.name})))},I=function(e){var a=e.field,t=e.label,n=e.min,l=e.max;return c.a.createElement(A.a.Field,null,c.a.createElement("label",null,t),c.a.createElement(x.b,Object.assign({},a,{type:"number",min:n,max:l})),c.a.createElement("div",{style:{color:"red"}},c.a.createElement(x.a,{name:a.name})))},R=function(e){var a=e.diagnoses,t=e.setFieldValue,n=e.setFieldTouched,l="diagnosisCodes",r=a.map((function(e){return{key:e.code,text:"".concat(e.name," (").concat(e.code,")"),value:e.code}}));return c.a.createElement(A.a.Field,null,c.a.createElement("label",null,"Diagnoses"),c.a.createElement(T.a,{fluid:!0,multiple:!0,search:!0,selection:!0,options:r,onChange:function(e,a){n(l,!0),t(l,a.value)}}),c.a.createElement(x.a,{name:l}))};!function(e){e.Male="male",e.Female="female",e.Other="other"}(n||(n={})),function(e){e[e.Healthy=0]="Healthy",e[e.LowRisk=1]="LowRisk",e[e.HighRisk=2]="HighRisk",e[e.CriticalRisk=3]="CriticalRisk"}(l||(l={}));var q=[{value:n.Male,label:"Male"},{value:n.Female,label:"Female"},{value:n.Other,label:"Other"}],V=function(e){var a=e.onSubmit,t=e.onCancel;return c.a.createElement(x.d,{initialValues:{name:"",ssn:"",dateOfBirth:"",occupation:"",gender:n.Other},onSubmit:a,validate:function(e){var a={};return e.name||(a.name="Field is required"),e.ssn||(a.ssn="Field is required"),e.dateOfBirth||(a.dateOfBirth="Field is required"),e.occupation||(a.occupation="Field is required"),a}},(function(e){var a=e.isValid,n=e.dirty;return c.a.createElement(x.c,{className:"form ui"},c.a.createElement(x.b,{label:"Name",placeholder:"Name",name:"name",component:H}),c.a.createElement(x.b,{label:"Social Security Number",placeholder:"SSN",name:"ssn",component:H}),c.a.createElement(x.b,{label:"Date Of Birth",placeholder:"YYYY-MM-DD",name:"dateOfBirth",component:H}),c.a.createElement(x.b,{label:"Occupation",placeholder:"Occupation",name:"occupation",component:H}),c.a.createElement(L,{label:"Gender",name:"gender",options:q}),c.a.createElement(N.a,null,c.a.createElement(N.a.Column,{floated:"left",width:5},c.a.createElement(f.a,{type:"button",onClick:t,color:"red"},"Cancel")),c.a.createElement(N.a.Column,{floated:"right",width:5},c.a.createElement(f.a,{type:"submit",floated:"right",color:"green",disabled:!n||!a},"Add"))))}))},_=function(e){var a=e.modalOpen,t=e.onClose,n=e.onSubmit,l=e.error;return c.a.createElement(F.a,{open:a,onClose:t,centered:!1,closeIcon:!0},c.a.createElement(F.a.Header,null,"Add a new patient"),c.a.createElement(F.a.Content,null,l&&c.a.createElement(j.a,{inverted:!0,color:"red"},"Error: ".concat(l)),c.a.createElement(V,{onSubmit:n,onCancel:t})))},B=t(458),P=["The patient is in great shape","The patient has a low risk of getting sick","The patient has a high risk of getting sick","The patient has a diagnosed condition"],Y=function(e){var a=e.rating,t=e.showText;return c.a.createElement("div",{className:"health-bar"},c.a.createElement(B.a,{icon:"heart",disabled:!0,rating:4-a,maxRating:4}),t?c.a.createElement("p",null,P[a]):null)},M=function(){var e=S(),a=Object(u.a)(e,2),t=a[0].patients,n=a[1],l=c.a.useState(!1),r=Object(u.a)(l,2),i=r[0],o=r[1],s=c.a.useState(),m=Object(u.a)(s,2),h=m[0],v=m[1],g=function(){o(!1),v(void 0)};return c.a.createElement("div",{className:"App"},c.a.createElement(b.a,{textAlign:"center"},c.a.createElement("h3",null,"Patient list")),c.a.createElement(w.a,{celled:!0},c.a.createElement(w.a.Header,null,c.a.createElement(w.a.Row,null,c.a.createElement(w.a.HeaderCell,null,"Name"),c.a.createElement(w.a.HeaderCell,null,"Gender"),c.a.createElement(w.a.HeaderCell,null,"Occupation"),c.a.createElement(w.a.HeaderCell,null,"Health Rating"))),c.a.createElement(w.a.Body,null,Object.values(t).map((function(e){return c.a.createElement(w.a.Row,{key:e.id},c.a.createElement(w.a.Cell,null,c.a.createElement(E.b,{to:"/patient/".concat(e.id)},e.name)),c.a.createElement(w.a.Cell,null,e.gender),c.a.createElement(w.a.Cell,null,e.occupation),c.a.createElement(w.a.Cell,null,c.a.createElement(Y,{showText:!1,rating:1})))})))),c.a.createElement(_,{modalOpen:i,onSubmit:function(e){var a,t;return d.a.async((function(l){for(;;)switch(l.prev=l.next){case 0:return l.prev=0,l.next=3,d.a.awrap(p.a.post("".concat(y,"/patients"),e));case 3:a=l.sent,t=a.data,n({type:"ADD_PATIENT",payload:t}),g(),l.next=13;break;case 9:l.prev=9,l.t0=l.catch(0),console.error(l.t0.response.data),v(l.t0.response.data.error);case 13:case"end":return l.stop()}}),null,null,[[0,9]])},error:h,onClose:g}),c.a.createElement(f.a,{onClick:function(){return o(!0)}},"Add New Patient"))},z=t(77),G=function(e){var a=e.onSubmit,t=e.onCancel,n=S(),r=Object(u.a)(n,1)[0].diagnoses;return c.a.createElement(x.d,{initialValues:{date:"",description:"",specialist:"",diagnosisCodes:[""],healthCheckRating:l.Healthy,type:"HealthCheck"},onSubmit:a,validate:function(e){var a={};return e.date||(a.date="Field is required"),e.description||(a.description="Field is required"),e.specialist||(a.specialist="Field is required"),e.diagnosisCodes||(a.diagnosisCodes="Field is required"),a}},(function(e){var a=e.isValid,n=e.dirty,l=e.setFieldValue,i=e.setFieldTouched;return c.a.createElement(x.c,{className:"form ui"},c.a.createElement(x.b,{label:"Date",placeholder:"Date",name:"date",component:H}),c.a.createElement(x.b,{label:"Description",placeholder:"Description",name:"description",component:H}),c.a.createElement(x.b,{label:"Specialist",placeholder:"Specialist",name:"specialist",component:H}),c.a.createElement(x.b,{label:"healthCheckRating",name:"healthCheckRating",component:I,min:0,max:3}),c.a.createElement(R,{setFieldValue:l,setFieldTouched:i,diagnoses:Object.values(r)}),c.a.createElement(N.a,null,c.a.createElement(N.a.Column,{floated:"left",width:5},c.a.createElement(f.a,{type:"button",onClick:t,color:"red"},"Cancel")),c.a.createElement(N.a.Column,{floated:"right",width:5},c.a.createElement(f.a,{type:"submit",floated:"right",color:"green",disabled:!n||!a},"Add"))))}))},J=function(e){var a=e.modalOpen,t=e.onClose,n=e.onSubmit,l=e.error;return c.a.createElement(F.a,{open:a,onClose:t,centered:!1,closeIcon:!0},c.a.createElement(F.a.Header,null,"Add a new health check entry"),c.a.createElement(F.a.Content,null,l&&c.a.createElement(j.a,{inverted:!0,color:"red"},"Error: ".concat(l)),c.a.createElement(G,{onSubmit:n,onCancel:t})))},U=function(e){var a=e.onSubmit,t=e.onCancel,n=S(),l=Object(u.a)(n,1)[0].diagnoses;return c.a.createElement(x.d,{initialValues:{date:"",description:"",specialist:"",diagnosisCodes:[""],discharge:{date:"",criteria:""},type:"Hospital"},onSubmit:a,validate:function(e){var a={};return e.date||(a.date="Field is required"),e.description||(a.description="Field is required"),e.specialist||(a.specialist="Field is required"),e.diagnosisCodes||(a.diagnosisCodes="Field is required"),e.discharge.date&&e.discharge.criteria||(a.discharge="Field is required"),a}},(function(e){var a=e.isValid,n=e.dirty,r=e.setFieldValue,i=e.setFieldTouched;return c.a.createElement(x.c,{className:"form ui"},c.a.createElement(x.b,{label:"Date",placeholder:"Date",name:"date",component:H}),c.a.createElement(x.b,{label:"Description",placeholder:"Description",name:"description",component:H}),c.a.createElement(x.b,{label:"Specialist",placeholder:"Specialist",name:"specialist",component:H}),c.a.createElement(x.b,{label:"Discharge Date",placeholder:"Discharge Date",name:"discharge.date",component:H}),c.a.createElement(x.b,{label:"Discharge Criteria",placeholder:"Discharge Criteria",name:"discharge.criteria",component:H}),c.a.createElement(R,{setFieldValue:r,setFieldTouched:i,diagnoses:Object.values(l)}),c.a.createElement(N.a,null,c.a.createElement(N.a.Column,{floated:"left",width:5},c.a.createElement(f.a,{type:"button",onClick:t,color:"red"},"Cancel")),c.a.createElement(N.a.Column,{floated:"right",width:5},c.a.createElement(f.a,{type:"submit",floated:"right",color:"green",disabled:!n||!a},"Add"))))}))},K=function(e){var a=e.modalOpen,t=e.onClose,n=e.onSubmit,l=e.error;return c.a.createElement(F.a,{open:a,onClose:t,centered:!1,closeIcon:!0},c.a.createElement(F.a.Header,null,"Add a new hospital entry"),c.a.createElement(F.a.Content,null,l&&c.a.createElement(j.a,{inverted:!0,color:"red"},"Error: ".concat(l)),c.a.createElement(U,{onSubmit:n,onCancel:t})))},Q=function(e){var a=e.onSubmit,t=e.onCancel,n=S(),l=Object(u.a)(n,1)[0].diagnoses;return c.a.createElement(x.d,{initialValues:{date:"",description:"",specialist:"",diagnosisCodes:[""],employerName:"",sickLeave:{startDate:"",endDate:""},type:"OccupationalHealthcare"},onSubmit:function(e){var t,n,l=e;""===(null===(t=l.sickLeave)||void 0===t?void 0:t.startDate)&&""===(null===(n=l.sickLeave)||void 0===n?void 0:n.endDate)&&delete l.sickLeave,a(l)},validate:function(e){var a,t,n,l,r={};return e.date||(r.date="Field is required"),e.description||(r.description="Field is required"),e.specialist||(r.specialist="Field is required"),e.diagnosisCodes||(r.diagnosisCodes="Field is required"),(!(null===e||void 0===e?void 0:null===(a=e.sickLeave)||void 0===a?void 0:a.startDate)&&(null===e||void 0===e?void 0:null===(t=e.sickLeave)||void 0===t?void 0:t.endDate)||(null===e||void 0===e?void 0:null===(n=e.sickLeave)||void 0===n?void 0:n.startDate)&&!(null===e||void 0===e?void 0:null===(l=e.sickLeave)||void 0===l?void 0:l.endDate))&&(r.sickLeave="Field is required"),r}},(function(e){var a=e.isValid,n=e.dirty,r=e.setFieldValue,i=e.setFieldTouched;return c.a.createElement(x.c,{className:"form ui"},c.a.createElement(x.b,{label:"Date",placeholder:"Date",name:"date",component:H}),c.a.createElement(x.b,{label:"Description",placeholder:"Description",name:"description",component:H}),c.a.createElement(x.b,{label:"Specialist",placeholder:"Specialist",name:"specialist",component:H}),c.a.createElement(x.b,{label:"Employer Name",placeholder:"Employer Name",name:"employerName",component:H}),c.a.createElement(x.b,{label:"Sick Leave Start Date",placeholder:"Sick Leave Start Date",name:"sickLeave.startDate",component:H}),c.a.createElement(x.b,{label:"Sick Leave End Date",placeholder:"Sick Leave End Date",name:"sickLeave.endDate",component:H}),c.a.createElement(R,{setFieldValue:r,setFieldTouched:i,diagnoses:Object.values(l)}),c.a.createElement(N.a,null,c.a.createElement(N.a.Column,{floated:"left",width:5},c.a.createElement(f.a,{type:"button",onClick:t,color:"red"},"Cancel")),c.a.createElement(N.a.Column,{floated:"right",width:5},c.a.createElement(f.a,{type:"submit",floated:"right",color:"green",disabled:!n||!a},"Add"))))}))},W=function(e){var a=e.modalOpen,t=e.onClose,n=e.onSubmit,l=e.error;return c.a.createElement(F.a,{open:a,onClose:t,centered:!1,closeIcon:!0},c.a.createElement(F.a.Header,null,"Add a new hospital entry"),c.a.createElement(F.a.Content,null,l&&c.a.createElement(j.a,{inverted:!0,color:"red"},"Error: ".concat(l)),c.a.createElement(Q,{onSubmit:n,onCancel:t})))},X=function(e){switch(e){case"male":return"mars";case"female":return"venus";case"other":return"genderless";default:return}},Z=function(e){switch(e){case 0:return"green";case 1:return"yellow";case 2:return"orange";case 3:return"red";default:return}},$=function(e){var a,t=e.entry,n=S(),l=Object(u.a)(n,1)[0].diagnoses;return c.a.createElement(j.a,null,c.a.createElement("div",{style:{display:"flex"}},c.a.createElement("h3",{style:{paddingRight:"5px"}},t.date)," ",c.a.createElement(z.a,{name:"doctor",size:"large"})),"Doctor: ",t.specialist," ",c.a.createElement("br",null),c.a.createElement("i",null,t.description)," ",c.a.createElement("br",null),c.a.createElement("i",null,"Discharged: ".concat(t.discharge.date,", ").concat(t.discharge.criteria))," ",c.a.createElement("br",null),c.a.createElement("ul",null,null===(a=t.diagnosisCodes)||void 0===a?void 0:a.map((function(e,a){return l[e]?c.a.createElement("li",{key:a},e," ",l[e].name):c.a.createElement("div",null,"Loading...")}))))},ee=function(e){var a=e.entry;return c.a.createElement(j.a,null,c.a.createElement("div",{style:{display:"flex"}},c.a.createElement("h3",{style:{paddingRight:"5px"}},a.date)," ",c.a.createElement(z.a,{name:"stethoscope",size:"large"})),"Doctor: ",a.specialist," ",c.a.createElement("br",null),c.a.createElement("i",null,a.description)," ",c.a.createElement("br",null),c.a.createElement(z.a,{name:"heart",color:Z(a.healthCheckRating)}))},ae=function(e){var a,t,n=e.entry;return c.a.createElement(j.a,null,c.a.createElement("div",{style:{display:"flex"}},c.a.createElement("h3",{style:{paddingRight:"5px"}},n.date)," ",c.a.createElement(z.a,{name:"industry",size:"large"})),"Doctor: ",n.specialist," ",c.a.createElement("br",null),"Employer: ",n.employerName," ",c.a.createElement("br",null),c.a.createElement("i",null,n.description)," ",c.a.createElement("br",null),n.sickLeave?"Sick leave: ".concat(null===(a=n.sickLeave)||void 0===a?void 0:a.startDate,":").concat(null===(t=n.sickLeave)||void 0===t?void 0:t.endDate):null)},te=function(e){switch(e.type){case"Hospital":return c.a.createElement($,{entry:e});case"HealthCheck":return c.a.createElement(ee,{entry:e});case"OccupationalHealthcare":return c.a.createElement(ae,{entry:e});default:return function(e){throw new Error("Unhandled type: ".concat(JSON.stringify(e)))}(e)}},ne=function(){var e=S(),a=Object(u.a)(e,2),t=a[0].patientInfo,n=a[1],l=Object(h.f)().id,r=c.a.useState(!1),i=Object(u.a)(r,2),o=i[0],s=i[1],m=c.a.useState(!1),E=Object(u.a)(m,2),b=E[0],v=E[1],g=c.a.useState(!1),C=Object(u.a)(g,2),O=C[0],D=C[1],k=c.a.useState(),w=Object(u.a)(k,2),F=w[0],j=w[1],N=function(e){return e(!0)},x=function(){s(!1),v(!1),D(!1),j(void 0)},A=function(e){var a,r,c,i,o;return d.a.async((function(s){for(;;)switch(s.prev=s.next){case 0:return s.prev=0,(null===(a=(r=e).diagnosisCodes)||void 0===a?void 0:a.every((function(e){return""===e})))&&delete r.diagnosisCodes,s.next=5,d.a.awrap(p.a.post("".concat(y,"/patients/").concat(l,"/entries"),r));case 5:c=s.sent,i=c.data,(o=t[l]).entries.push(i),n({type:"ADD_ENTRY",payload:o}),x(),s.next=17;break;case 13:s.prev=13,s.t0=s.catch(0),console.error(s.t0.response.data),j(s.t0.response.data.error);case 17:case"end":return s.stop()}}),null,null,[[0,13]])};return t[l]?c.a.createElement("div",null,c.a.createElement("div",{style:{display:"flex"}},c.a.createElement("h2",null,t[l].name),c.a.createElement(z.a,{name:X(t[l].gender),size:"large"})),c.a.createElement("p",null,"Occupation: ",t[l].occupation),c.a.createElement("p",null,t[l].dateOfBirth?"DoB: ".concat(t[l].dateOfBirth):""),c.a.createElement("p",null,t[l].ssn?"SSN: ".concat(t[l].ssn):""),c.a.createElement("h4",null,"Entries:"),t[l].entries.map((function(e){return te(e)})),c.a.createElement(J,{modalOpen:o,onSubmit:A,error:F,onClose:x}),c.a.createElement(f.a,{onClick:function(){return N(s)}},"Add New Health Check Entry"),c.a.createElement(K,{modalOpen:b,onSubmit:A,error:F,onClose:x}),c.a.createElement(f.a,{onClick:function(){return N(D)}},"Add New Hospital Entry")," ",c.a.createElement("br",null),c.a.createElement(W,{modalOpen:O,onSubmit:A,error:F,onClose:x}),c.a.createElement(f.a,{onClick:function(){return N(D)}},"Add New Occupational Health Check Entry")):(function(){var e,a;d.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,d.a.awrap(p.a.get("".concat(y,"/patients/").concat(l)));case 3:e=t.sent,a=e.data,n({type:"ADD_DETAILED_INFO",payload:a}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.error(t.t0);case 11:case"end":return t.stop()}}),null,null,[[0,8]])}(),c.a.createElement("div",null,"Loading..."))},le=function(){var e=S(),a=Object(u.a)(e,2)[1];return c.a.useEffect((function(){p.a.get("".concat(y,"/ping"));!function(){var e,t;d.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,d.a.awrap(p.a.get("".concat(y,"/patients")));case 3:e=n.sent,t=e.data,a({type:"SET_PATIENT_LIST",payload:t}),n.next=11;break;case 8:n.prev=8,n.t0=n.catch(0),console.error(n.t0);case 11:case"end":return n.stop()}}),null,null,[[0,8]])}(),function(){var e,t;d.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,d.a.awrap(p.a.get("".concat(y,"/diagnoses")));case 3:e=n.sent,t=e.data,console.log(t),a({type:"ADD_DIAGNOSES",payload:t}),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),console.error(n.t0);case 12:case"end":return n.stop()}}),null,null,[[0,9]])}()}),[a]),c.a.createElement("div",{className:"App"},c.a.createElement(E.a,null,c.a.createElement(b.a,null,c.a.createElement(v.a,{as:"h1"},"Patientor"),c.a.createElement(f.a,{as:E.b,to:"/",primary:!0},"Home"),c.a.createElement(g.a,{hidden:!0}),c.a.createElement(h.c,null,c.a.createElement(h.a,{path:"/patient/:id"},c.a.createElement(ne,null)),c.a.createElement(h.a,{path:"/"},c.a.createElement(M,null))))))};o.a.render(c.a.createElement((function(e){var a=e.reducer,t=e.children,n=Object(r.useReducer)(a,D),l=Object(u.a)(n,2),i=l[0],o=l[1];return c.a.createElement(k.Provider,{value:[i,o]},t)}),{reducer:function(e,a){switch(a.type){case"SET_PATIENT_LIST":return Object(O.a)({},e,{patients:Object(O.a)({},a.payload.reduce((function(e,a){return Object(O.a)({},e,Object(C.a)({},a.id,a))}),{}),{},e.patients)});case"ADD_PATIENT":return Object(O.a)({},e,{patients:Object(O.a)({},e.patients,Object(C.a)({},a.payload.id,a.payload))});case"ADD_DETAILED_INFO":case"ADD_ENTRY":return Object(O.a)({},e,{patientInfo:Object(O.a)({},e.patientInfo,Object(C.a)({},a.payload.id,a.payload))});case"ADD_DIAGNOSES":return Object(O.a)({},e,{diagnoses:Object(O.a)({},a.payload.reduce((function(e,a){return Object(O.a)({},e,Object(C.a)({},a.code,a))}),{}),{},e.diagnoses)});default:return e}}},c.a.createElement(le,null)),document.getElementById("root"))}},[[261,1,2]]]);
//# sourceMappingURL=main.f48b3cd0.chunk.js.map